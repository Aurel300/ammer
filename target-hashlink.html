<!DOCTYPE html><html><head>
	<title>HashLink – ammer manual</title>
	<meta charset="utf-8">
	<link rel="stylesheet" href="css/style.css" media="all">
</head><body>
	<header><a href="index.html"><h1>ammer</h1></a></header>
	<nav id="menu"><ul><li><a href="index.html">Introduction</a></li><ul><li><a href="intro-start.html">Getting started</a></li></ul><ul><li><a href="intro-installation.html">Installation</a></li></ul><ul><li><a href="intro-sample.html">Sample project</a></li></ul><ul><li><a href="intro-use.html">Use cases</a></li></ul><ul><li><a href="intro-troubleshooting.html">Troubleshooting</a></li></ul></ul><ul><li><a href="definition.html">Definition</a></li><ul><li><a href="definition-library.html">Library definition</a></li><ul><li><a href="definition-library-functions.html">Functions</a></li></ul><ul><li><a href="definition-library-constants.html">Constants</a></li></ul><ul><li><a href="definition-link.html">Linking subdefinitions</a></li></ul></ul><ul><li><a href="definition-sub.html">Sublibraries</a></li></ul><ul><li><a href="definition-type.html">Library datatype definition</a></li><ul><li><a href="definition-type-nested.html">Nested data</a></li></ul></ul><ul><li><a href="definition-enum.html">Enumerations</a></li></ul><ul><li><a href="definition-metadata.html">Metadata</a></li></ul><ul><li><a href="definition-ffi.html">FFI types</a></li><ul><li><a href="definition-ffi-size.html">Size types</a></li></ul><ul><li><a href="definition-ffi-callbacks.html">Callbacks</a></li></ul></ul></ul><ul><li><a href="configuration.html">Configuration</a></li><ul><li><a href="configuration-general.html">General configuration</a></li></ul><ul><li><a href="configuration-library.html">Library configuration</a></li></ul></ul><ul><li><a href="target.html">Target details</a></li><ul><li><a href="target-hxcpp.html">C++</a></li></ul><ul><li><a href="target-eval.html">Eval</a></li></ul><ul><li><a href="target-hashlink.html">HashLink</a></li></ul><ul><li><a href="target-lua.html">Lua</a></li></ul></ul><ul><li><a href="library.html">Native library development</a></li></ul><ul><li><a href="ammer.html">Implementation details</a></li><ul><li><a href="ammer-testing.html">Testing</a></li></ul><ul><li><a href="ammer-stages.html">Compilation stages</a></li></ul></ul></nav>
	<main><h2>HashLink</h2><p>HashLink can use native libraries when given <code>.hdll</code> files containing the stubs, which take HashLink types and pass them onto the dynamically-loaded library. The <code>.hdll</code> files specify dynamic linkage and provide HashLink FFI, as understood by the HashLink interpreter/VM <code>hl</code>.</p>
<p>During compilation with <code>ammer</code>, the <code>.hdll</code> file for a native library needs to be (re-)compiled whenever the native library or the Haxe library definition changes.</p>
<p>This process is facilitated by creating a <code>Makefile</code> and FFI-defining C files in the directory defined by <code>ammer.hl.build</code>. The compiled <code>hdll</code> files are then placed into the directory defined by <code>ammer.hl.output</code>. Both directories are the same as the <code>.hl</code> output by default.</p>
<pre><code class="language-hxml">-D ammer.hl.build=where/to/place/the/stubs
-D ammer.hl.output=where/to/place/the/hdll/files
--hl where/to/place/the/output.hl</code></pre>
<p>When running, the <code>.hdll</code> file must be present either in the current working directory, or in the library directory (e.g. <code>/usr/local/lib</code>). For distributing programs to end users, the former is preferred (since the <code>.hdll</code> files need not be installed).</p>
<h3 id="ammer.hl.hlInclude"><code>ammer.hl.hlInclude</code>, <code>ammer.hl.hlLibrary</code></h3><p><strong>Optional</strong></p>
<p>Compilation of HashLink <code>.hdll</code> files relies on the <code>hl.h</code> header and the <code>libhl</code> library (the <code>libhl.dylib</code> or <code>libhl.lib</code> file in particular). These defines should be used if the HashLink headers are not present in the default include path.</p>
<p>When using HashLink built from source, <code>ammer.hl.hlInclude</code> should point to the <code>src</code> directory of the HashLink repository clone, and <code>ammer.hl.hlLibrary</code> to the directory containing the binaries produced during HashLink compilation.</p>
<p>When using a binary release of HashLink, both paths should point to the <code>include</code> directory distributed along with the executable.</p>
</main>
	<a id="page-prev" href="target-eval.html">« Previous: Eval</a>
	<a id="page-next" href="target-lua.html">Next: Lua »</a>
	<footer>
		<a href="https://github.com/Aurel300/ammer/blob/gh-pages-src/content/04-target.md">Contribute to this page</a>
		| <a href="https://github.com/Aurel300/ammer/" target="_blank"><code>ammer</code> on GitHub</a>
		| &copy; 2019-2021 Aurel Bílý
	</footer>
</body></html>